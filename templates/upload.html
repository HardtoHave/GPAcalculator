<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Upload Transcript</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <script>
        // Function to add a new course input group
        function addCourse() {
            const courseContainer = document.getElementById('course-container');
            const newCourse = document.createElement('div');
            newCourse.classList.add('course');
            newCourse.innerHTML = `
                <div>
                    <label>Subject Number and Name:</label>
                    <input type="text" name="subject_name[]" required>
                    <label>Mark:</label>
                    <input type="number" name="mark[]" required>
                    <label>Credit Points:</label>
                    <input type="number" name="credit_points[]" required>
                    <button type="button" onclick="removeCourse(this)">Delete</button>
                </div>
            `;
            courseContainer.appendChild(newCourse);
        }

        // Function to remove a course input group
        function removeCourse(button) {
            button.parentElement.parentElement.remove();
        }
    </script>
</head>
<body>
    <h1>Upload your Transcript</h1>
    <form action="/" method="post" enctype="multipart/form-data">
        <input type="file" name="file">
        <input type="submit" value="Upload">
    </form>

    {% if detected_courses %}
    <h2>Detected Courses</h2>
    <form action="{{ url_for('show_page') }}" method="post">
        <div id="course-container">
            {% for course in detected_courses %}
            <div class="course">
                <div>
                    <label>Subject Number and Name:</label>
                    <input type="text" name="subject_name[]" value="{{ course.subject_name }}" required>
                    <label>Mark:</label>
                    <input type="number" name="mark[]" value="{{ course.mark }}" required>
                    <label>Credit Points:</label>
                    <input type="number" name="credit_points[]" value="{{ course.credit_points }}" required>
                    <button type="button" onclick="removeCourse(this)">Delete</button>
                </div>
            </div>
            {% endfor %}
        </div>
        <button type="button" onclick="addCourse()">Add Course</button>
        <input type="submit" value="Confirm">
    </form>
    {% endif %}
</body>
</html>
